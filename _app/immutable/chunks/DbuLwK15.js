import"./Bzak7iHL.js";import{au as L,av as R,aj as x,ak as O,aC as B,l as k,h as z}from"./DIn1sXZP.js";import{U as v,N as F,P as M,a as J,b as C,e as h,H as G,p as V}from"./BinzpnUI.js";class w extends Error{constructor(t,a){super(t),this.name="DevalueError",this.path=a.join("")}}function E(e){return Object(e)!==e}const Z=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function H(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getPrototypeOf(t)===null||Object.getOwnPropertyNames(t).sort().join("\0")===Z}function W(e){return Object.prototype.toString.call(e).slice(8,-1)}function Y(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function b(e){let t="",a=0;const c=e.length;for(let u=0;u<c;u+=1){const s=e[u],l=Y(s);l&&(t+=e.slice(a,u)+l,a=u+1)}return`"${a===0?e:t+e.slice(a)}"`}function K(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t).enumerable)}const q=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function N(e){return q.test(e)?"."+e:"["+JSON.stringify(e)+"]"}function Q(e,t){const a=[],c=new Map,u=[];if(t)for(const r of Object.getOwnPropertyNames(t))u.push({key:r,fn:t[r]});const s=[];let l=0;function p(r){if(typeof r=="function")throw new w("Cannot stringify a function",s);if(r===void 0)return v;if(Number.isNaN(r))return F;if(r===1/0)return M;if(r===-1/0)return J;if(r===0&&1/r<0)return C;if(c.has(r))return c.get(r);const f=l++;c.set(r,f);for(const{key:I,fn:U}of u){const m=U(r);if(m)return a[f]=`["${I}",${p(m)}]`,f}let o="";if(E(r))o=T(r);else{const I=W(r);switch(I){case"Number":case"String":case"Boolean":o=`["Object",${T(r)}]`;break;case"BigInt":o=`["BigInt",${r}]`;break;case"Date":o=`["Date","${!isNaN(r.getDate())?r.toISOString():""}"]`;break;case"URL":o=`["URL",${b(r.toString())}]`;break;case"URLSearchParams":o=`["URLSearchParams",${b(r.toString())}]`;break;case"RegExp":const{source:m,flags:D}=r;o=D?`["RegExp",${b(m)},"${D}"]`:`["RegExp",${b(m)}]`;break;case"Array":o="[";for(let n=0;n<r.length;n+=1)n>0&&(o+=","),n in r?(s.push(`[${n}]`),o+=p(r[n]),s.pop()):o+=G;o+="]";break;case"Set":o='["Set"';for(const n of r)o+=`,${p(n)}`;o+="]";break;case"Map":o='["Map"';for(const[n,d]of r)s.push(`.get(${E(n)?T(n):"..."})`),o+=`,${p(n)},${p(d)}`,s.pop();o+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const n=r;o='["'+I+'",'+p(n.buffer);const d=r.byteOffset,i=d+r.byteLength;if(d>0||i!==n.buffer.byteLength){const y=+/(\d+)/.exec(I)[1]/8;o+=`,${d/y},${i/y}`}o+="]";break}case"ArrayBuffer":{o=`["ArrayBuffer","${h(r)}"]`;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":o=`["${I}",${b(r.toString())}]`;break;default:if(!H(r))throw new w("Cannot stringify arbitrary non-POJOs",s);if(K(r).length>0)throw new w("Cannot stringify POJOs with symbolic keys",s);if(Object.getPrototypeOf(r)===null){o='["null"';for(const n in r)s.push(N(n)),o+=`,${b(n)},${p(r[n])}`,s.pop();o+="]"}else{o="{";let n=!1;for(const d in r)n&&(o+=","),n=!0,s.push(N(d)),o+=`${b(d)}:${p(r[d])}`,s.pop();o+="}"}}}return a[f]=o,f}const g=p(e);return g<0?`${g}`:`[${a.join(",")}]`}function T(e){const t=typeof e;return t==="string"?b(e):e instanceof String?b(e.toString()):e===void 0?v.toString():e===0&&1/e<0?C.toString():t==="bigint"?`["BigInt","${e}"]`:String(e)}L(["click"]);function X(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}function ee(e,t,a={}){const{expireDays:c=365,maxAge:u,path:s="/",domain:l,secure:p=!1,sameSite:g="Lax",httpOnly:r=!1}=a;let f=`${e}=${encodeURIComponent(t)}`;if(f+=`; path=${s}`,u!==void 0)f+=`; max-age=${u}`;else{const o=new Date(Date.now()+c*864e5).toUTCString();f+=`; expires=${o}`}l&&(f+=`; domain=${l}`),p&&(f+="; secure"),f+=`; samesite=${g}`,r&&(f+="; httponly"),document.cookie=f}function te(e,t={}){return e==="local"?{getItem:a=>localStorage.getItem(a),setItem:(a,c)=>localStorage.setItem(a,c)}:e==="session"?{getItem:a=>sessionStorage.getItem(a),setItem:(a,c)=>sessionStorage.setItem(a,c)}:{getItem:X,setItem:(a,c)=>ee(a,c,t)}}function S(e,t,a={}){const{storage:c="local",serializer:u=JSON,syncTabs:s=!0,cookieExpireDays:l,cookieOptions:p={},onWriteError:g=console.error,onParseError:r=console.error,beforeRead:f=i=>i,beforeWrite:o=i=>i}=a,I={...p,...l!==void 0&&{expireDays:l}},m=typeof window<"u"&&typeof document<"u"?te(c,I):null;let D;try{const i=m==null?void 0:m.getItem(e);D=i?f(u.parse(i)):t}catch(i){r(i),D=t}let n=R(x(D));function d(i){try{const y=o(i);m==null||m.setItem(e,u.stringify(y))}catch(y){g(y)}}return s&&typeof window<"u"&&c==="local"&&window.addEventListener("storage",i=>{if(i.key===e&&i.storageArea===localStorage)try{const y=i.newValue?u.parse(i.newValue):t;O(n,f(y),!0)}catch(y){r(y)}}),B(()=>(z(()=>{d(k(n))}),()=>{})),{get value(){return k(n)},set value(i){O(n,i,!0)},get current(){return k(n)},set current(i){O(n,i,!0)},reset(){O(n,t,!0)}}}const $={stringify:Q,parse:V},re={totalAmount:0,totalNoOfPeople:2,mode:"simple",peopleData:[{id:1,name:"person-1",paid:0,cost:0,locked:!1},{id:2,name:"person-2",paid:0,cost:0,locked:!1}]},P=S("data",{...re},{serializer:$}),ce=S("appState",{isPWAapp:!1,showInputTable:!1,showOutput:!1},{serializer:$});function ie(e=!1){const t=P.current,a=t.peopleData,c=a.length,u=Math.max(1,Math.floor(t.totalNoOfPeople));if(c!==u){const s=[];for(let l=0;l<u;l++)e&&a[l]?s.push(a[l]):s.push({id:l+1,name:"person-"+(l+1),paid:0,cost:0,locked:!1});s.forEach((l,p)=>{l.id=p+1}),t.peopleData=s,P.current=t}}function ue(){const e=crypto.randomUUID(),t={id:e,name:"ðŸ—¾ Japan Trip 2024",members:[{id:crypto.randomUUID(),name:"Alice"},{id:crypto.randomUUID(),name:"Bob"},{id:crypto.randomUUID(),name:"Charlie"},{id:crypto.randomUUID(),name:"Dave"}]},a=crypto.randomUUID(),c={id:a,name:"ðŸ—¼ Tokyo Expenses",groupId:e,transactions:[{id:crypto.randomUUID(),description:"âœˆï¸ Flight Tickets",payers:[{...t.members[0],amount:1200},{...t.members[1],amount:1200}],beneficiaries:[...t.members]},{id:crypto.randomUUID(),description:"ðŸ¨ Hotel Booking (3 nights)",payers:[{...t.members[2],amount:900}],beneficiaries:[...t.members]},{id:crypto.randomUUID(),description:"ðŸ£ Sushi Dinner at Tsukiji",payers:[{...t.members[1],amount:180}],beneficiaries:[...t.members]},{id:crypto.randomUUID(),description:"ðŸš„ Bullet Train to Kyoto",payers:[{...t.members[3],amount:280}],beneficiaries:[t.members[0],t.members[1],t.members[3]]},{id:crypto.randomUUID(),description:"ðŸŽ­ Kabuki Theater Tickets",payers:[{...t.members[0],amount:240}],beneficiaries:[t.members[0],t.members[2]]},{id:crypto.randomUUID(),description:"ðŸœ Ramen Street Food",payers:[{...t.members[1],amount:25},{...t.members[2],amount:20}],beneficiaries:[...t.members]}]};_.current=[..._.current,t],j.current=[...j.current,c],ae.current=a}const le=x({mermaidLoading:!1,mermaidString:""}),A=x({optimumTransactions:[],fullTableData:[]});function pe(){const e=P.current,t=e.peopleData.map(a=>{const c=e.mode==="advanced"?a.cost-a.paid:e.totalAmount/e.totalNoOfPeople-a.paid,u=[];return A.optimumTransactions.forEach(([s,l,p])=>{a.name===s&&u.push({to:l,amount:p})}),[a.id,a.name,a.paid,c,u]});return A.fullTableData=t,t}const _=S("groups",[],{serializer:$}),j=S("ledgers",[],{serializer:$}),ae=S("activeLedgerId",null,{serializer:$});export{ce as a,ae as b,ue as c,A as d,P as e,pe as f,_ as g,j as l,le as m,ie as r};
